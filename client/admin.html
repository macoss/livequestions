<template name="admin">
<head>
  {{> title }}
</head>

<body>
  <div class="container">
    {{> header}}
    <div id="content">
      <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
        <li class="active"><a href="#incomming" data-toggle="tab">Incomming</a></li>
        <li><a href="#approved" data-toggle="tab">Approved</a></li>
      </ul>
      <div id="my-tab-content" class="tab-content">
        <div class="tab-pane active" id="incomming">
          {{> incomming}}
          <p>Rejected messages will be listed in <span class="rejectMessage">red.</span></p>
        </div>
        <div class="tab-pane" id="approved">
          {{> approved}}
          <p>The selected question that will be shown on the sceen will be <span class="selected">green.</span></p>
        </div>
      </div>
    </div>
    <div id="footer">
    </div>
  </div>
</body>
</template>

<template name="incomming">
  <h2>Incomming</h2>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Approve</th>
        <th>Messages</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
      {{#each smsMessages}}
        {{> eachIncommingMessage}} 
      {{/each}}
    </tbody>
  </table>
</template>

<template name="approved">
  <h2>Approved</h2>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Approve</th>
        <th>Messages</th>
      </tr>
    </thead>
    <tbody>
      {{#each approvedMessages}}
        {{> eachMessage}}
      {{/each}}
    </tbody>
  </table>
</template>

<template name="eachMessage">
  <tr>
    {{#if Approved }}
      <td class="rejectMessage pointer">Reject</td>
      {{#if Selected }}
        <td class="selectedMessage selected pointer">{{Body}}</td>
      {{else}}
        <td class="selectedMessage pointer">{{Body}}</td>
      {{/if}}
    {{else}}
      <td class="approveMessage pointer">Approve</td>
      <td>{{Body}}</td>
    {{/if}}
  </tr>
</template>
  
<template name="eachIncommingMessage">
  <tr>
    <td class="approveMessage pointer">Approve</td>
    {{#if RejectedAt }}
    <td class="rejectMessage selectedMessage pointer">{{Body}}</td>
    {{else}}
      <td class="selectedMessage pointer">{{Body}}</td>
    {{/if}}
    <td class="deleteMessage pointer">Delete</td>
  </tr>
</template>

<template name="editMessage">
<!-- Modal -->
<div class="modal fade" id="editItem" tabindex="-1" role="dialog" aria-labelledby="Edit Item" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <a class="close" data-dismiss="modal">Ã—</a>
        <h3>Edit Message</h3>
      </div>
      <div class="modal-body" >
        <div class="form-group">
          <input type="hidden" id="messageId" value="{{message._id}}" />
          <textarea id="message" name="message" class="form-control">{{message.Body}}</textarea>        </div>
      </div>
      <div class="modal-footer">
        <a href="#" class="btn btn-success">Save</a>
        <a href="#" class="btn" data-dismiss="modal">close</a>
      </div>
    </div>
  </div>
</div>
</template>
